---
title: İletileri, yükleri ve Serileştirmeyi Azure Service Bus | Microsoft Docs
description: Bu makalede, Azure Service Bus iletiler, yük, ileti yönlendirme ve serileştirme hakkında genel bir bakış sunulmaktadır.
ms.topic: article
ms.date: 04/14/2021
ms.openlocfilehash: 2ed65054f61aee4b9fb6157fc7a36e469c7a672c
ms.sourcegitcommit: db925ea0af071d2c81b7f0ae89464214f8167505
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 04/15/2021
ms.locfileid: "107515303"
---
# <a name="messages-payloads-and-serialization"></a>İletiler, yükler ve serileştirme

Microsoft Azure Service Bus iletileri işler. İletiler bir yükü ve meta verileri taşır. Meta veriler anahtar-değer çifti özellikleri biçimindedir, yükü açıklar ve Service Bus ve uygulamalar için işleme yönergeleri sağlar. Bazen bu meta veriler, gönderenin alıcılar ile iletişim kurmak istediği bilgileri taşımak için yeterlidir ve yük boş kalır.

.NET ve Java için resmi Service Bus istemcilerinin nesne modeli, Service Bus destekleyen tel protokolleriyle ve bu bilgisayarlardan eşlenen soyut Service Bus ileti yapısını yansıtır.
 
Service Bus ileti, Service Bus hiçbir biçimde hizmet tarafında hiçbir şekilde işlemez ve iki özellik kümesine sahip olan bir ikili yük bölümden oluşur. *Aracı Özellikleri* sistem tarafından önceden tanımlanmıştır. Bu önceden tanımlanmış özellikler, aracı içindeki ileti düzeyi işlevselliğini denetler ya da ortak ve standartlaştırılmış meta veri öğelerine eşlenir. *Kullanıcı özellikleri* , uygulama tarafından tanımlanabilir ve ayarlanabilir anahtar-değer çiftleri koleksiyonudur.
 
Önceden tanımlanmış aracı özellikleri aşağıdaki tabloda listelenmiştir. Adlar tüm resmi istemci API 'Leri ve ayrıca HTTP protokol eşlemesinin [aracılı Özellikler](https://docs.microsoft.com/rest/api/servicebus/introduction) JSON nesnesinde kullanılır.
 
AMQP protokol düzeyinde kullanılan eşdeğer adlar parantez içinde listelenmiştir. Aşağıdaki adlarda, Pascal büyük küçük harf kullanılmasına karşın, JavaScript ve Python istemcilerinin sırasıyla ortası ve Snake büyük harfleri kullanacağına lütfen emin olun.

| Özellik Adı                         | Açıklama                                                                                                                                                                                                                                                                                                                                                                                                                               |
|---------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `ContentType` (içerik türü)           | İsteğe bağlı olarak, RFC2045 biçimini izleyen bir tanımlayıcı ile ileti yükünü açıklar, Bölüm 5; Örneğin, `application/json` .                                                                                                                                                                                                                                                                                             |
| `CorrelationId` (bağıntı kimliği)       | Bir uygulamanın, bağıntı amaçları doğrultusunda ileti için bir bağlam belirtmesini sağlar; Örneğin, yanıtmakta olan bir iletinin **MessageID** ' i yansıtmaktadır.                                                                                                                                                                                                                                                                  |
| `DeadLetterSource`                      | Yalnızca, atılacak iletileri ve daha sonra teslim edilemeyen ileti sırasından başka bir varlığa yeniden iletilen iletilerde ayarlanır. İletinin atılacak varlığı gösterir. Bu özellik salt okunur durumdadır.                                                                                                                                                                                                                                  |
| `DeliveryCount`                         | <p>Bu ileti için denenen teslimler sayısı. Bir ileti kilidinin süresi dolarsa sayı artırılır veya ileti alıcı tarafından açıkça terk edilir. Bu özellik salt okunur durumdadır.</p> <p>Temel AMQP bağlantısı kapalıyken teslim sayısı artmaz.</p>                                                                                                                                                                                                                                                 |
| `EnqueuedSequenceNumber`                | Bu özellik, tekrar iletilen iletiler için ilk gönderim noktasında iletiye atanan sıra numarasını yansıtır. Bu özellik salt okunur durumdadır.                                                                                                                                                                                                                                                                |
| `EnqueuedTimeUtc`                       | İletinin kabul edildiği ve varlıkta depolandığı UTC Instant. Alıcı gönderenin saatine güvenmek istemediğinizde bu değer yetkili ve nötr varış süresi göstergesi olarak kullanılabilir. Bu özellik salt okunur durumdadır.                                                                                                                                                                                                   |
| `ExpiresAtUtc` (mutlak-süre sonu) | İleti, kaldırma için işaretlenen ve süresi dolduktan sonra varlıktan alınmayacak olan UTC Instant. Süre sonu **TimeToLive** özelliği tarafından denetlenir ve bu özellik EnqueuedTimeUtc + TimeToLive ' dan hesaplanır. Bu özellik salt okunur durumdadır.                                                                                                                                                                           |
| `Label` or `Subject` (konu)                       | Bu özellik, uygulamanın, e-posta konu satırına benzer şekilde, iletinin bir standart olarak alıcıya bir ileti amacını işaret etmesini sağlar.                                                                                                                                                                                                                                                                                  |
| `LockedUntilUtc`                        | Kilit altında alınan iletiler için (önceden kapanmamış), bu özellik ileti kuyrukta/abonelikte kilitlenene kadar UTC anlık öğesini yansıtır. Kilidin süresi dolarsa, [Deliverycount](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.deliverycount) artırılır ve ileti geri alma için yeniden kullanılabilir. Bu özellik salt okunur durumdadır.                                                                                                                         |
| `LockToken`                             | Kilit belirteci, *göz atma-kilit* alma modunda aracı tarafından tutulmakta olan kilidin bir başvurusudur. Belirteç [, kilitleme API 'si](message-deferral.md) aracılığıyla kilidi kalıcı olarak sabitlemek ve bu durumda iletiyi normal teslim durumu akışından dışına almak için kullanılabilir. Bu özellik salt okunur durumdadır.                                                                                                                                                               |
| `MessageId` (ileti kimliği)                | İleti tanımlayıcısı, iletiyi ve yükünü benzersiz bir şekilde tanımlayan uygulama tanımlı bir değerdir. Tanımlayıcı, serbest biçimli bir dizedir ve bir GUID veya uygulama bağlamından türetilmiş tanımlayıcıyı yansıtabilir. Etkinleştirilirse, [yinelenen algılama](duplicate-detection.md) özelliği aynı **MessageID**'e sahip iletilerin ikinci ve daha fazla gönderimlerini tanımlar ve kaldırır.                                                                |
| `PartitionKey`                          | [Bölümlenmiş varlıklar](service-bus-partitioning.md)için, bu değeri ayarlamak ilgili iletilerin aynı iç bölüme atanmasını sağlar, böylece gönderim sırası sırası doğru şekilde kaydedilir. Bölüm Bu değer üzerinde bir karma işlev tarafından seçilir ve doğrudan seçilemez. Oturum kullanan varlıklar için **SessionID** özelliği bu değeri geçersiz kılar.                                                                                                       |
| `ReplyTo` (Yanıtla)                    | Bu isteğe bağlı ve uygulama tanımlı değeri, ileti alıcısının yanıt yolunu ifade etmenin standart bir yoludur. Bir gönderen bir yanıt beklerken, değeri, yanıtın gönderilmesini beklediği sıranın veya konunun mutlak veya göreli yoluna ayarlar.                                                                                                                                           |
| `ReplyToSessionId` (Yanıtla-grup kimliği)  | Bu değer, **ReplyTo** bilgilerini genişlettiğini ve yanıt varlığına gönderildiğinde yanıt Için hangi **SessionID** 'nin ayarlanacağını belirtir.                                                                                                                                                                                                                                                                            |
| `ScheduledEnqueueTimeUtc`               | Bu özellik, yalnızca bir gecikmeden sonra alınabilmeleri için kullanılabilir hale getirilen iletiler için, iletinin mantıksal olarak kuyruğa alınacağı, sıralandığı ve bu nedenle alma için kullanılabilir hale getirilen UTC Instant 'ı tanımlar.                                                                                                                                                                                                                 |
| `SequenceNumber`                        | Sıra numarası, aracı tarafından kabul edildiği ve depolandığı ve doğru tanımlayıcısı olarak işlevlerin bulunduğu bir iletiye atanan benzersiz bir 64 bitlik tamsayıdır. Bölümlenmiş varlıklarda en üstteki 16 bit, Bölüm tanımlayıcısını yansıtır. Dizi numaraları monoton olarak artar ve bu da daha az. Bunlar, 48-64 bit aralığı tükendiğinde 0 ' a devredilirler. Bu özellik salt okunur durumdadır.                                                                |
| `SessionId` (grup kimliği)                  | Oturum kullanan varlıklar için, bu uygulama tanımlı değer iletinin oturum ilişkisini belirtir. Aynı oturum tanımlayıcısına sahip iletiler, Özet kilitlemeye tabidir ve tam sıralı işleme ve parçalanmayı etkinleştirir. Oturum kullanmayan varlıklar için bu değer yok sayılır.                                                                                                                                     |
                                                                                                                                          |
| `TimeToLive`                            | Bu değer, iletinin süresinin dolmasının ne kadar süre dolacağını, anlık sunucudan itibaren ileti tarafından kabul edilip depolanmadığını ve **Enqueuetimeutc**' de yakalanarak, aracı tarafından nasıl depolandığını belirten göreli süredir. Açıkça ayarlanmamışsa, ilgili kuyruk veya konu için varsayılan değer **Defaulttimetolive** ' dir. İleti düzeyi **TimeToLive** değeri, varlığın **defaulttimetolive** ayarından daha uzun olamaz. Daha uzunsa sessizce ayarlanır. |
| `To` silmek                               | Bu özellik, yönlendirme senaryolarında ileride kullanılmak üzere ayrılmıştır ve şu anda aracının kendisi tarafından yok sayılır. Uygulamalar, iletinin amaçlanan mantıksal hedefini göstermek için bu değeri kural temelli bir oto ileri sarma senaryolarında kullanabilir.                                                                                                                                                                                   |
| `ViaPartitionKey`                       | Bir ileti bir işlem kapsamındaki Aktarım kuyruğu aracılığıyla gönderilirse, bu değer aktarım sırası bölümünü seçer.                                                                                                                                                                                                                                                                                                                 |

Soyut ileti modeli, bir iletinin HTTPS aracılığıyla bir kuyruğa gönderilmesini sağlar ve AMQP aracılığıyla alınabilir. Her iki durumda da, ileti ilgili protokol bağlamında normal görünür. Aracı Özellikleri gerektiği şekilde çevrilir ve Kullanıcı özellikleri ilgili protokol ileti modelinde en uygun konumla eşleştirilir. HTTP 'de, Kullanıcı özellikleri doğrudan HTTP başlıklarından ve bu üstbilgilere eşlenir; AMQP 'de **Uygulama-Özellikler** haritalarından ve öğesinden eşlenir.

## <a name="message-routing-and-correlation"></a>İleti yönlendirme ve bağıntı

Daha önce,,,, ve ile açıklanan aracı özelliklerinin bir alt kümesi, `To` `ReplyTo` `ReplyToSessionId` `MessageId` `CorrelationId` `SessionId` uygulamaların belirli hedeflere ileti yönlendirme konusunda yardımcı olmak için kullanılır. Bu özelliği göstermek için birkaç deseni göz önünde bulundurun:

- **Basit istek/yanıt**: Yayımcı bir kuyruğa ileti gönderir ve ileti tüketicisini bir yanıt bekler. Yanıt almak için yayımcı, yanıtların teslim edilmesini beklediği bir kuyruğa sahip olur. Bu kuyruğun adresi giden iletinin **ReplyTo** özelliğinde ifade edilir. Tüketici yanıt verdiğinde, işlenen iletinin **MessageID** özelliğini yanıt Iletisinin **CorrelationId** özelliğine kopyalar ve iletiyi **ReplyTo** özelliği tarafından belirtilen hedefe gönderir. Bir ileti, uygulama bağlamına bağlı olarak birden çok yanıt verebilir.
- **Çok noktaya yayın isteği/yanıtı**: önceki düzenin bir çeşitlemesi olarak, yayımcı iletiyi bir konuya gönderir ve birden çok abone iletiyi kullanmak için uygun hale gelir. Abonelerin her biri, daha önce açıklanan biçimde yanıt verebilir. Bu model bulma veya toplama çağrı senaryolarında kullanılır ve yanıtlayan genellikle kendisini bir Kullanıcı özelliği veya yük içinde tanımlar. **ReplyTo** bir konuya işaret ediyorsa, bu tür bir bulma yanıtı kümesi bir hedef kitleye dağıtılabilir.
- **Çoğullama**: Bu oturum özelliği, ilgili iletilerin her oturumunda (veya grubunun), eşleşen **SessionID** değerleriyle tanımlanan her bir oturuma (veya gruba) belirli bir alıcıya yönlendirilerek, alıcı kilit altında oturum tuttuğunda, ilişkili ileti akışlarının tek bir kuyruk veya abonelik üzerinden çoğullaştırmayı sağlar. [Buradaki](message-sessions.md)oturumların ayrıntıları hakkında daha fazla bilgi edinin.
- **Çoğullanmış istek/yanıt**: Bu oturum özelliği, birden çok yayımcıların bir yanıt kuyruğu paylaşmasına izin veren Multiplexed yanıtlarını sağlar. **Replytosessionıd** ayarlanarak, yayımcı bu değeri yanıt iletisinin **SessionID** özelliğine kopyalamak için tüketiciye yol açabilir. Yayımlama sırasının veya konusunun oturum Aware olması gerekmez. İleti gönderilirken, yayımcı daha sonra bir oturum alıcısını koşullu kabul ederek belirli bir **SessionID** 'nin sırada bir oturum açmaya başlamasını sağlayabilir. 

Bir Service Bus ad alanının içinde yönlendirme, ileri sarma zincirleme ve konu aboneliği kuralları kullanılarak gerçekleştirilebilir. Ad alanları genelinde yönlendirme [Azure LogicApps kullanılarak](https://azure.microsoft.com/services/logic-apps/)gerçekleştirilebilir. Önceki listede gösterildiği gibi, **to** özelliği daha sonra kullanılmak üzere ayrılmıştır ve sonuç olarak, özel olarak etkinleştirilmiş bir özelliği olan aracı tarafından yorumlanabilecek. Yönlendirmeyi uygulamak isteyen uygulamalar, bu özelliği, **to** özelliğine göre değil, Kullanıcı özelliklerine göre gerçekleştirmelidir. Ancak, bunun yapılması uyumluluk sorunlarına neden olmaz.

## <a name="payload-serialization"></a>Yük serileştirme

Aktarım sırasında veya Service Bus içinde depolandığında, yük her zaman donuk, ikili bir blok olur. `ContentType`Özelliği, özellik değerleri için, IETF rfc2045 'e göre MIME içerik türü açıklaması olacak şekilde, uygulamaların yükü tanımlamasını sağlar; örneğin, `application/json;charset=utf-8` .

Java veya .NET Standard türevlerinden farklı olarak, Service Bus API 'sinin .NET Framework sürümü, rastgele .NET nesnelerini oluşturucuya geçirerek **Brokeredmessage** örnekleri oluşturmayı destekler. 

Eski SBMP protokolünü kullanırken, bu nesneler varsayılan ikili seri hale getirici ile veya dışarıdan sağlanan seri hale getirici ile serileştirilir. AMQP protokolünü kullanırken, nesne bir AMQP nesnesine serileştirilir. Alıcı, bu nesneleri [GetBody \<T> ()](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.getbody#Microsoft_ServiceBus_Messaging_BrokeredMessage_GetBody__1) yöntemiyle alabilir ve beklenen türü sağlayabilir. AMQP ile, nesneler bir AMQP grafiğine `ArrayList` ve nesnelerine serileştirilir `IDictionary<string,object>` ve tüm AMQP istemcileri bunların kodunu çözebilir. 

Bu gizli serileştirme Magic uygun olsa da, uygulamalar nesne serileştirmesi için açık denetim almalıdır ve nesne grafiklerini bir iletiye dahil etmeden önce akışlara çevirip, alıcı tarafında da ters bir değer alır. Bu, birlikte çalışabilen sonuçlar verir. AMQP güçlü bir ikili kodlama modeline sahip olsa da AMQP mesajlaşma ekosistemine bağlıdır ve HTTP istemcileri bu tür yükleri çözmede sorun yaşayabilir. 

.NET Standard ve Java API 'Sı çeşitleri yalnızca Byte dizilerini kabul eder, bu da uygulamanın nesne serileştirme denetimini işlemesi gerektiği anlamına gelir. 

## <a name="next-steps"></a>Sonraki adımlar

Service Bus mesajlaşma hakkında daha fazla bilgi edinmek için aşağıdaki konulara bakın:

* [Service Bus kuyrukları, konu başlıkları ve abonelikleri](service-bus-queues-topics-subscriptions.md)
* [Service Bus kuyrukları ile çalışmaya başlama](service-bus-dotnet-get-started-with-queues.md)
* [Service Bus konu başlıklarını ve aboneliklerini kullanma](service-bus-dotnet-how-to-use-topics-subscriptions.md)
